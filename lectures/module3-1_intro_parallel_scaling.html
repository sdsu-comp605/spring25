
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>11) Introduction to Parallel Scaling &#8212; Scientific Computing</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'lectures/module3-1_intro_parallel_scaling';</script>
    <link rel="icon" href="../_static/SDSU-comp605_logo.svg"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="12) Introduction to OpenMP" href="module3-2_intro_to_openmp.html" />
    <link rel="prev" title="10) Introduction to Multithreading" href="module2-5_intro_multithreading.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/SDSU-comp605_logo.svg" class="logo__image only-light" alt="Scientific Computing - Home"/>
    <script>document.write(`<img src="../_static/SDSU-comp605_logo.svg" class="logo__image only-dark" alt="Scientific Computing - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Welcome
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../syllabus.html">Syllabus</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../lectures.html">Lectures</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="module1-1_first_class.html">1) First Class: Reproducibility and Git</a></li>


<li class="toctree-l2"><a class="reference internal" href="module1-2_linux.html">2) The Linux Filesystem and commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="module1-3_community_projects.html">3) Community Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="module1-4_intro_architectures.html">4) Introduction to Computer Architectures</a></li>
<li class="toctree-l2"><a class="reference internal" href="module1-5_intro_vectorization.html">5) Introduction to Vectorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="module2-1_measuring_performance.html">6) Measuring Performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="module2-2_cpu_optimization.html">7) CPU Optimization: Matrix-Matrix Multiply</a></li>
<li class="toctree-l2"><a class="reference internal" href="module2-3_blocked_mmm.html">8) Blocked Matrix-Matrix Multiplication</a></li>
<li class="toctree-l2"><a class="reference internal" href="module2-4_packing_for_cache.html">9) Packing for cache</a></li>
<li class="toctree-l2"><a class="reference internal" href="module2-5_intro_multithreading.html">10) Introduction to Multithreading</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">11) Introduction to Parallel Scaling</a></li>
<li class="toctree-l2"><a class="reference internal" href="module3-2_intro_to_openmp.html">12) Introduction to OpenMP</a></li>
<li class="toctree-l2"><a class="reference internal" href="module3-3_openmp_tasks.html">13) More on OpenMP and OpenMP Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="module4-1_case_study_1_libceed.html">14) Case Study 1: libCEED</a></li>
<li class="toctree-l2"><a class="reference internal" href="module4-2_case_study_2_climacore.html">15) Case Study 2: ClimaCore</a></li>
<li class="toctree-l2"><a class="reference internal" href="module5-1_reductions_and_scans.html">16) Parallel reductions and scans</a></li>
<li class="toctree-l2"><a class="reference internal" href="module5-2_intro_to_mpi.html">17) Introduction to MPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="module5-3_intro_to_slurm.html">18) Introduction to Batch Jobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="module5-4_parallel_linear_alegebra.html">19) Parallel Linear Algebra</a></li>
<li class="toctree-l2"><a class="reference internal" href="module6-1_intro_to_mpi_jl.html">20) Introduction to MPI.jl</a></li>
<li class="toctree-l2"><a class="reference internal" href="module6-2_blocking_vs_nonblocking.html">21) Blocking and non-blocking communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="module6-3_collectives.html">22) Collective communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="module7-1_coprocessors.html">23) Coprocessor architectures</a></li>
<li class="toctree-l2"><a class="reference internal" href="module7-2_cuda.html">24) GPUs and CUDA</a></li>
<li class="toctree-l2"><a class="reference internal" href="module7-3_practical_cuda.html">25) Practical CUDA</a></li>
<li class="toctree-l2"><a class="reference internal" href="module8-1_cuda_jl.html">26) Intro to GPU programming in Julia</a></li>
<li class="toctree-l2"><a class="reference internal" href="module8-2_cuda_jl_memory.html">27) Memory management with CUDA.jl</a></li>
<li class="toctree-l2"><a class="reference internal" href="module8-3_cuda_jl_reduction.html">28) Parallel reductions with CUDA.jl</a></li>
<li class="toctree-l2"><a class="reference internal" href="module9-1_ispc_and_others.html">29) ISPC, OpenMP target, OpenACC, and all that</a></li>
<li class="toctree-l2"><a class="reference internal" href="module9-2_parallel_io.html">30) I/O in HPC</a></li>
<li class="toctree-l2"><a class="reference internal" href="module10-1_careers.html">31) Careers in HPSC</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/sdsu-comp605/spring25" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/sdsu-comp605/spring25/issues/new?title=Issue%20on%20page%20%2Flectures/module3-1_intro_parallel_scaling.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/lectures/module3-1_intro_parallel_scaling.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>11) Introduction to Parallel Scaling</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#programs-with-more-than-one-part">1. Programs with more than one part</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scalability">2. Scalability</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scalability-metrics">2.1 Scalability metrics</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scalability-laws">2.1 Scalability laws</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#strong-scaling">3. Strong scaling</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fixed-total-problem-size">Fixed total problem size.</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#strong-scaling-cost-vs-p">3.1 Strong scaling: Cost Vs p</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#efficiency">3.2 Efficiency</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#parallel-efficiency">Parallel efficiency</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#strong-scaling-efficiency-vs-p">3.3 Strong scaling: Efficiency Vs p</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#strong-scaling-speedup-vs-p">3.4 Strong scaling: Speedup Vs p</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#observations">Observations:</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#efficiency-time-spectrum">Efficiency-Time spectrum</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#weak-scaling">4. Weak Scaling</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#recommended-readings">Recommended Readings:</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="introduction-to-parallel-scaling">
<h1>11) Introduction to Parallel Scaling<a class="headerlink" href="#introduction-to-parallel-scaling" title="Link to this heading">#</a></h1>
<p>Last time:</p>
<ul class="simple">
<li><p>Intro to Multithreading</p></li>
</ul>
<p>Today:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#programs-with-more-than-one-part"><span class="xref myst">Programs with more than one part</span></a></p></li>
<li><p><a class="reference internal" href="#scalability"><span class="xref myst">Scalability</span></a><br />
2.1 <a class="reference internal" href="#scalability-metrics"><span class="xref myst">Scalability metrics</span></a><br />
2.2 2.1 <a class="reference internal" href="#scalability-laws"><span class="xref myst">Scalability laws</span></a></p></li>
<li><p><a class="reference internal" href="#strong-scaling"><span class="xref myst">Strong scaling</span></a></p></li>
<li><p><a class="reference internal" href="#weak-scaling"><span class="xref myst">Weak scaling</span></a></p></li>
</ol>
<section id="programs-with-more-than-one-part">
<h2>1. Programs with more than one part<a class="headerlink" href="#programs-with-more-than-one-part" title="Link to this heading">#</a></h2>
<p>So far, we’ve focused on simple programs with only one part, but real programs have several different parts, often with data dependencies.</p>
<p>Some parts will be amenable to optimization and/or parallelism and others will not.</p>
<p><img alt="Diminishing returns" src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/40/Optimizing-different-parts.svg/2880px-Optimizing-different-parts.svg.png" /></p>
<p>This principle is called <a class="reference external" href="https://en.wikipedia.org/wiki/Amdahl%27s_law">Amdahl’s Law</a>, which is a formula that shows how much faster a task can be completed when more resources are added to the system.</p>
<p>Suppose that a fraction <span class="math notranslate nohighlight">\(f\)</span> of the total work is amenable to optimization. We run a problem size <span class="math notranslate nohighlight">\(n\)</span> with parallelization (or parallelizable) factor <span class="math notranslate nohighlight">\(p\)</span>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">function</span><span class="w"> </span><span class="n">exec_time</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">;</span><span class="w"> </span><span class="n">n</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">latency</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="c"># Suppose that a fraction f of the total work is amenable to optimization</span>
<span class="w">    </span><span class="c"># We run a problem size n with parallelization factor p</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">latency</span><span class="w"> </span><span class="o">.+</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">.-</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="o">*</span><span class="n">n</span><span class="w"> </span><span class="o">.+</span><span class="w"> </span><span class="n">f</span><span class="o">*</span><span class="n">n</span><span class="o">./</span><span class="n">p</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>exec_time (generic function with 1 method)
</pre></div>
</div>
</div>
</div>
<p>Let’s see a few fractions for example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">using</span><span class="w"> </span><span class="n">Plots</span>
<span class="k">using</span><span class="w"> </span><span class="n">DataFrames</span>
<span class="k">using</span><span class="w"> </span><span class="n">Printf</span>
<span class="n">default</span><span class="p">(</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">legendfontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

<span class="n">ps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">exp10</span><span class="o">.</span><span class="p">(</span><span class="n">range</span><span class="p">(</span><span class="n">log10</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="n">log10</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span><span class="w"> </span><span class="n">length</span><span class="o">=</span><span class="mi">50</span><span class="p">))</span>

<span class="n">plot</span><span class="p">(</span><span class="n">ps</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">exec_time</span><span class="p">(</span><span class="mf">.99</span><span class="p">,</span><span class="w"> </span><span class="n">ps</span><span class="p">,</span><span class="w"> </span><span class="n">latency</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">exec_time</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">ps</span><span class="p">,</span><span class="w"> </span><span class="n">latency</span><span class="o">=</span><span class="mi">0</span><span class="p">)],</span>
<span class="w">    </span><span class="n">xscale</span><span class="o">=</span><span class="ss">:log10</span><span class="p">,</span><span class="w"> </span><span class="n">yscale</span><span class="o">=</span><span class="ss">:log10</span><span class="p">,</span><span class="w"> </span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;f=0.99&quot;</span><span class="w"> </span><span class="s">&quot;f=1&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="n">title</span><span class="o">=</span><span class="s">&quot;A first look at strong scaling&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">xlabel</span><span class="o">=</span><span class="s">&quot;p&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ylabel</span><span class="o">=</span><span class="s">&quot;time&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="ne">ArgumentError</span>: Package DataFrames not found in current path.
<span class="o">-</span> <span class="n">Run</span> <span class="err">`</span><span class="kn">import</span><span class="w"> </span><span class="nn">Pkg</span><span class="p">;</span> <span class="n">Pkg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;DataFrames&quot;</span><span class="p">)</span><span class="err">`</span> <span class="n">to</span> <span class="n">install</span> <span class="n">the</span> <span class="n">DataFrames</span> <span class="n">package</span><span class="o">.</span>

<span class="ne">Stacktrace</span>:
 <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="n">macro</span> <span class="n">expansion</span>
   <span class="o">@</span> <span class="o">./</span><span class="n">loading</span><span class="o">.</span><span class="n">jl</span><span class="p">:</span><span class="mi">1842</span> <span class="p">[</span><span class="n">inlined</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="n">macro</span> <span class="n">expansion</span>
   <span class="o">@</span> <span class="o">./</span><span class="n">lock</span><span class="o">.</span><span class="n">jl</span><span class="p">:</span><span class="mi">267</span> <span class="p">[</span><span class="n">inlined</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="n">__require</span><span class="p">(</span><span class="n">into</span><span class="p">::</span><span class="n">Module</span><span class="p">,</span> <span class="n">mod</span><span class="p">::</span><span class="n">Symbol</span><span class="p">)</span>
   <span class="o">@</span> <span class="n">Base</span> <span class="o">./</span><span class="n">loading</span><span class="o">.</span><span class="n">jl</span><span class="p">:</span><span class="mi">1823</span>
 <span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="c1">#invoke_in_world#3</span>
   <span class="o">@</span> <span class="o">./</span><span class="n">essentials</span><span class="o">.</span><span class="n">jl</span><span class="p">:</span><span class="mi">926</span> <span class="p">[</span><span class="n">inlined</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="n">invoke_in_world</span>
   <span class="o">@</span> <span class="o">./</span><span class="n">essentials</span><span class="o">.</span><span class="n">jl</span><span class="p">:</span><span class="mi">923</span> <span class="p">[</span><span class="n">inlined</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="n">require</span><span class="p">(</span><span class="n">into</span><span class="p">::</span><span class="n">Module</span><span class="p">,</span> <span class="n">mod</span><span class="p">::</span><span class="n">Symbol</span><span class="p">)</span>
   <span class="o">@</span> <span class="n">Base</span> <span class="o">./</span><span class="n">loading</span><span class="o">.</span><span class="n">jl</span><span class="p">:</span><span class="mi">1816</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="scalability">
<h2>2. Scalability<a class="headerlink" href="#scalability" title="Link to this heading">#</a></h2>
<section id="scalability-metrics">
<h3>2.1 Scalability metrics<a class="headerlink" href="#scalability-metrics" title="Link to this heading">#</a></h3>
<p>In order to be able to define scalability we first have to identify the basic measurements on which derived performance metrics are built.</p>
<p>In a simple model, the overall problem size (“amount of work”) shall be <span class="math notranslate nohighlight">\(s + p = 1\)</span>, where <span class="math notranslate nohighlight">\(s\)</span> is the <strong>serial</strong> (or sequential, nonparallelizable) part and <span class="math notranslate nohighlight">\(p\)</span> is the perfectly parallelizable fraction.</p>
<p>There can be many reasons for a nonvanishing serial part:</p>
<ul class="simple">
<li><p><em>Algorithmic limitations</em>. Operations that cannot be done in parallel because of, e.g., mutual dependencies, can only be performed one after another, or even in a certain order.</p></li>
<li><p><em>Bottlenecks</em>. Shared resources are common in computer systems: Execution units in the core, shared paths to memory in multicore chips, I/O devices. Access to a shared resource serializes execution. Even if the algorithm itself could be performed completely in parallel, concurrency may be limited by bottlenecks.</p></li>
<li><p><em>Startup overhead</em>. Starting a parallel program, regardless of the technical details, takes time. Of course, system designs try to minimize startup time, especially in massively parallel systems, but there is always a nonvanishing serial part. If a parallel application’s overall runtime is too short, startup will have a strong impact. (This is also why usually the first elapsed time of the execution of a benchmark program is discarded when measuring performance).</p></li>
<li><p><em>Communication</em>. Fully concurrent  communication between different parts of a parallel system cannot be taken for granted. If solving a problem in parallel requires communication, some serialization is usually unavoidable. Some communication processes limit scalability as they cannot be overlaped with each other or with calculation.</p>
<ul>
<li><p>Communication can be accounted for in scalability metrics in a more elaborate way than just adding a constant to the serial fraction.</p></li>
</ul>
</li>
</ul>
<p>We assume a fixed problem (of a <em>fixed size</em>), which is to be solved by <span class="math notranslate nohighlight">\(N\)</span> workers. We normalize the single-worker (serial) runtime</p>
<div class="math notranslate nohighlight">
\[
T^s_\textrm{fixed size} = s + p
\]</div>
<p>to <span class="math notranslate nohighlight">\(1\)</span>.</p>
<p>Solving the same problem on <span class="math notranslate nohighlight">\(N\)</span> workers will require a runtime of</p>
<div class="math notranslate nohighlight">
\[
T^p_\textrm{fixed size} = s + \frac{p}{N}.
\]</div>
<p>This is called <strong>strong scaling</strong> because the amount of work stays constant no matter how many workers are used. Here the goal of parallelization is minimization of time to solution for a given problem.</p>
<p>If time to solution is not the primary objective because larger problem sizes (for which available memory is the limiting factor) are of interest, it is appropriate to scale the problem size with some power of <span class="math notranslate nohighlight">\(N\)</span> so that the total amount of work is <span class="math notranslate nohighlight">\(s + pN^{\alpha}\)</span> , where <span class="math notranslate nohighlight">\(\alpha\)</span> is a positive but otherwise free parameter. Here we use the implicit assumption that the serial fraction <span class="math notranslate nohighlight">\(s\)</span> is a constant.</p>
<p>We define the serial runtime for the scaled (<em>variably-sized</em>) problem as</p>
<div class="math notranslate nohighlight">
\[
T^s_\textrm{variable size} = s +pN^{\alpha}.
\]</div>
<p>Consequently, the parallel runtime in this case is:</p>
<div class="math notranslate nohighlight">
\[
T^p_\textrm{variable size} = s +pN^{\alpha -1}.
\]</div>
<p>The term <strong>weak scaling</strong> has been coined for this approach, although it is commonly used only for the special case <span class="math notranslate nohighlight">\(\alpha = 1\)</span>.</p>
</section>
<section id="scalability-laws">
<h3>2.1 Scalability laws<a class="headerlink" href="#scalability-laws" title="Link to this heading">#</a></h3>
<p>In a simple ansatz, <em>application speedup</em> can be defined as the quotient of parallel and serial performance for fixed problem size. In the following we define “performance” as “work over time”, unless otherwise noted.</p>
<p>Serial performance for fixed problem size (work) <span class="math notranslate nohighlight">\(s + p\)</span> is thus</p>
<div class="math notranslate nohighlight">
\[
P^s_{\textrm{fixed}} = \frac{s + p}{T^s_{\textrm{fixed}}}  = 1, 
\]</div>
<p>as exptected.</p>
<p>Parallel performance is in this case</p>
<div class="math notranslate nohighlight">
\[
P^p_{\textrm{fixed}} = \frac{s + p}{T^p_{\textrm{fixed}}}(N)  = \frac{1}{s + \frac{1-s}{N}}, 
\]</div>
<p>and application speedup (as “scalability”) is</p>
<div class="math notranslate nohighlight">
\[
S_{\textrm{fixed}} = \frac{P^p_{\textrm{fixed}}}{P^s_{\textrm{fixed}}} = \frac{1}{s + \frac{1-s}{N}} , \qquad \leftarrow \text{Amdahl's Law}.
\]</div>
<p>We have derived Amdahl’s Law.</p>
<p>This law limits the application speedup for (hypothetical) <span class="math notranslate nohighlight">\(N \rightarrow \infty\)</span> to <span class="math notranslate nohighlight">\(1/s\)</span>.</p>
<p>This law tries to answer the question:</p>
<ul class="simple">
<li><p><strong>Strong scaling</strong>: How much faster (in terms of runtime) does my application run when I put the same problem on <span class="math notranslate nohighlight">\(N\)</span> CPUs (i.e., more resources)?</p></li>
</ul>
<p>As opposed to weak scaling where workload grows with CPU count:</p>
<ul class="simple">
<li><p><strong>Weak scaling</strong>: How much more work can my program do in a given amount of time when I put a larger problem on <span class="math notranslate nohighlight">\(N\)</span> CPUs?</p></li>
</ul>
</section>
</section>
<section id="strong-scaling">
<h2>3. Strong scaling<a class="headerlink" href="#strong-scaling" title="Link to this heading">#</a></h2>
<section id="fixed-total-problem-size">
<h3>Fixed total problem size.<a class="headerlink" href="#fixed-total-problem-size" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>There are different “angles” at which we can look at strong scaling.</p></li>
</ul>
<section id="strong-scaling-cost-vs-p">
<h4>3.1 Strong scaling: Cost Vs p<a class="headerlink" href="#strong-scaling-cost-vs-p" title="Link to this heading">#</a></h4>
<p>Where we define Cost = <code class="docutils literal notranslate"><span class="pre">time</span> <span class="pre">*</span> <span class="pre">p</span></code>, with <code class="docutils literal notranslate"><span class="pre">p</span></code> parallelization factor.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">function</span><span class="w"> </span><span class="n">exec_cost</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">;</span><span class="w"> </span><span class="n">args</span><span class="o">...</span><span class="p">)</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">exec_time</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">;</span><span class="w"> </span><span class="n">args</span><span class="o">...</span><span class="p">)</span><span class="w"> </span><span class="o">.*</span><span class="w"> </span><span class="n">p</span>
<span class="k">end</span>

<span class="n">plt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plot</span><span class="p">(</span><span class="n">ps</span><span class="p">,</span><span class="w"> </span><span class="n">exec_cost</span><span class="p">(</span><span class="mf">.99</span><span class="p">,</span><span class="w"> </span><span class="n">ps</span><span class="p">),</span><span class="w"> </span><span class="n">xscale</span><span class="o">=</span><span class="ss">:log10</span><span class="p">,</span><span class="w"> </span><span class="n">yscale</span><span class="o">=</span><span class="ss">:log10</span><span class="p">,</span><span class="w"> </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Strong scaling: cost Vs p&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">xlabel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;p&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ylabel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;cost&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>In the above function, we have used Julia’s “<a class="reference external" href="https://docs.julialang.org/en/v1/base/base/#...">splat</a>” for a sequence of arguments.</p>
</section>
<section id="efficiency">
<h4>3.2 Efficiency<a class="headerlink" href="#efficiency" title="Link to this heading">#</a></h4>
<p>Efficiency can be viewed from the perspective of the time, the resources being allocated, or the energy that is consumed by the hardware during the job runtime (energy efficiency).</p>
</section>
<section id="parallel-efficiency">
<h4>Parallel efficiency<a class="headerlink" href="#parallel-efficiency" title="Link to this heading">#</a></h4>
<p>We want to ask ourselves how effectively a given resource, i.e., CPU computational power, can be used in a parallel program.</p>
<p>In the following, very simplified approach, we assume that the serial part of the program is executed on one single worker while all others have to wait. Hence, parallel efficiency can be defined as:</p>
<div class="math notranslate nohighlight">
\[
\varepsilon = \frac{\textrm{performance on } N \textrm{ CPUs}}{N \times \textrm{performance on one CPU}} = \frac{\textrm{speedup}}{N} .
\]</div>
</section>
<section id="strong-scaling-efficiency-vs-p">
<h4>3.3 Strong scaling: Efficiency Vs p<a class="headerlink" href="#strong-scaling-efficiency-vs-p" title="Link to this heading">#</a></h4>
<p>To simplify for now we consider:</p>
<div class="math notranslate nohighlight">
\[
\frac{1}{\textrm{cost}}
\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">plot</span><span class="p">(</span><span class="n">ps</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">./</span><span class="w"> </span><span class="n">exec_cost</span><span class="p">(</span><span class="mf">.99</span><span class="p">,</span><span class="w"> </span><span class="n">ps</span><span class="p">,</span><span class="w"> </span><span class="n">latency</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="n">xscale</span><span class="o">=</span><span class="ss">:log10</span><span class="p">,</span><span class="w"> </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Strong scaling: efficiency Vs p&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">xlabel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;p&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ylabel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;efficiency&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ylims</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nb">Inf</span><span class="p">],</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="strong-scaling-speedup-vs-p">
<h4>3.4 Strong scaling: Speedup Vs p<a class="headerlink" href="#strong-scaling-speedup-vs-p" title="Link to this heading">#</a></h4>
<p>And a simplified version of speedup:</p>
<div class="math notranslate nohighlight">
\[
S(p) = \frac{T(1)}{T(p)}
\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">plot</span><span class="p">(</span><span class="n">ps</span><span class="p">,</span><span class="w"> </span><span class="n">exec_time</span><span class="p">(</span><span class="mf">.99</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">latency</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">./</span><span class="w"> </span><span class="n">exec_time</span><span class="p">(</span><span class="mf">0.99</span><span class="p">,</span><span class="w"> </span><span class="n">ps</span><span class="p">,</span><span class="w"> </span><span class="n">latency</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="n">ylims</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">],</span><span class="w"> </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Strong scaling: speedup Vs p&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">xlabel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;p&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ylabel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;speedup&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="observations">
<h4>Observations:<a class="headerlink" href="#observations" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Stunt 1: When reporting perfomance data, it is <em>never</em> a good idea to report absolute performance! Rather, speedup (which is a relative measure) would be a better choice.</p></li>
</ul>
<p><img alt="Stunt 1 on performance graphs: absolute performance Vs relative speedup" src="../_images/stunt1.jpg" /></p>
<ul class="simple">
<li><p>A better way of plotting performance data:</p></li>
</ul>
</section>
</section>
<section id="efficiency-time-spectrum">
<h3>Efficiency-Time spectrum<a class="headerlink" href="#efficiency-time-spectrum" title="Link to this heading">#</a></h3>
<p>Why? People care about two observable properties:</p>
<ul class="simple">
<li><p>Time until job completes.</p></li>
<li><p>Cost in core-hours or dollars to do job.</p></li>
</ul>
<p>Most HPC applications have access to large machines, so don’t really care how many processes they use for any given job.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">plot</span><span class="p">(</span><span class="n">exec_time</span><span class="p">(</span><span class="mf">.99</span><span class="p">,</span><span class="w"> </span><span class="n">ps</span><span class="p">),</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">./</span><span class="w"> </span><span class="n">exec_cost</span><span class="p">(</span><span class="mf">.99</span><span class="p">,</span><span class="w"> </span><span class="n">ps</span><span class="p">),</span><span class="w"> </span><span class="n">ylims</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">],</span><span class="w"> </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Strong scaling: Efficiency Vs time&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">xlabel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;t&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ylabel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Efficiency&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">)</span>
<span class="n">scatter!</span><span class="p">(</span><span class="n">exec_time</span><span class="p">(</span><span class="mf">.99</span><span class="p">,</span><span class="w"> </span><span class="n">ps</span><span class="p">),</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">./</span><span class="w"> </span><span class="n">exec_cost</span><span class="p">(</span><span class="mf">.99</span><span class="p">,</span><span class="w"> </span><span class="n">ps</span><span class="p">),</span><span class="w"> </span><span class="n">seriescolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">:blue</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Principles:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://blogs.fau.de/hager/archives/5835">The log scale is your friend!</a></p></li>
<li><p>Both axes have tangible quantities people care about</p></li>
<li><p>Bigger is better on the <span class="math notranslate nohighlight">\(y\)</span> axis, and more pushed to the left is better on the <span class="math notranslate nohighlight">\(x\)</span> axis.</p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<ul class="simple">
<li><p>Recommended reading: <a class="reference external" href="https://blogs.fau.de/hager/archives/5260">Fooling the masses with performance results on parallel computers</a></p></li>
</ul>
</div>
</section>
</section>
<section id="weak-scaling">
<h2>4. Weak Scaling<a class="headerlink" href="#weak-scaling" title="Link to this heading">#</a></h2>
<p>Strong scaling is concerned with keeping the problem size <span class="math notranslate nohighlight">\(n\)</span> fixed, but parallel computers are also used to solve large problems. If we keep the amount of work <em>per processor</em> fixed, and vary the number of processors (and therefore the problem size) we are looking at weak scaling.</p>
<p>Following the same notation as above, we now have for serial performance:</p>
<div class="math notranslate nohighlight">
\[
P^s_{\textrm{variable size}} = \frac{s + p}{T^s_{\textrm{fixed size}}} = 1 ,
\]</div>
<p>as <span class="math notranslate nohighlight">\(N=1\)</span>.</p>
<p>For parallel performance (work over time):</p>
<div class="math notranslate nohighlight">
\[
P^p_{\textrm{variable size}} = \frac{s + p N^{\alpha}}{T^p_{\textrm{fixed size}} (N)} = \frac{s + (1-s) N^{\alpha}}{s+ (1-s) N^{\alpha -1}} = S_{\textrm{variable size}},
\]</div>
<p>identical to application speedup.</p>
<p>In the special case of <span class="math notranslate nohighlight">\(\alpha= 0\)</span> (strong scaling), we recover Amdahl’s law again.</p>
<p>For values of <span class="math notranslate nohighlight">\(\alpha\)</span>, <span class="math notranslate nohighlight">\(0 &lt; \alpha &lt; 1\)</span> and very large number of workers (CPU counts) <span class="math notranslate nohighlight">\(N \gg 1\)</span>:</p>
<div class="math notranslate nohighlight">
\[
S_{\textrm{variable size}} \rightarrow \frac{s + (1-s) N^\alpha}{s} = 1 + \frac{p}{s}N^\alpha ,
\]</div>
<p>which is linear in <span class="math notranslate nohighlight">\(N^\alpha\)</span>. As a result, weak scaling allows us to cross the so-called Amdahl Barrier and get unlimited performance, even for small <span class="math notranslate nohighlight">\(\alpha\)</span>.</p>
<p>The ideal case of <span class="math notranslate nohighlight">\(\alpha = 1\)</span> simplifies to:</p>
<div class="math notranslate nohighlight">
\[
S_{\textrm{variable size}}(\alpha = 1) = s + (1-s)N , \qquad \leftarrow \textrm{Gustafson's Law},
\]</div>
<p>and in this case speedup is linear in <span class="math notranslate nohighlight">\(N\)</span>, even for small <span class="math notranslate nohighlight">\(N\)</span>. This is called <a class="reference external" href="https://en.wikipedia.org/wiki/Gustafson's_law">Gustafson’s law</a>, which put in other words it is</p>
<blockquote>
<div><p>the theoretical “slowdown” of an already parallelized task if running on a serial machine.</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">ns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">.*</span><span class="w"> </span><span class="n">ps</span>

<span class="n">plot</span><span class="p">(</span><span class="n">ps</span><span class="p">,</span><span class="w"> </span><span class="n">ns</span><span class="w"> </span><span class="o">./</span><span class="w"> </span><span class="n">exec_cost</span><span class="p">(</span><span class="mf">.99</span><span class="p">,</span><span class="w"> </span><span class="n">ps</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="o">=</span><span class="n">ns</span><span class="p">,</span><span class="w"> </span><span class="n">latency</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="n">xscale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">:log10</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;10 p&quot;</span><span class="p">)</span>

<span class="n">ns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="o">*</span><span class="n">ps</span>

<span class="n">plot!</span><span class="p">(</span><span class="n">ps</span><span class="p">,</span><span class="w"> </span><span class="n">ns</span><span class="w"> </span><span class="o">./</span><span class="w"> </span><span class="n">exec_cost</span><span class="p">(</span><span class="mf">.99</span><span class="p">,</span><span class="w"> </span><span class="n">ps</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="o">=</span><span class="n">ns</span><span class="p">,</span><span class="w"> </span><span class="n">latency</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="n">xscale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">:log10</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;100 p&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Weak scaling&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">xlabel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;# procs&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ylabel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;efficiency&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plot</span><span class="p">()</span>
<span class="k">for</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">exp10</span><span class="o">.</span><span class="p">(</span><span class="n">range</span><span class="p">(;</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">log10</span><span class="p">(</span><span class="mf">0.1</span><span class="p">),</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">log10</span><span class="p">(</span><span class="mf">1e3</span><span class="p">)))</span>
<span class="w">    </span><span class="n">ns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="o">.*</span><span class="w"> </span><span class="n">ps</span>
<span class="w">    </span><span class="n">plot!</span><span class="p">(</span><span class="n">exec_time</span><span class="p">(</span><span class="mf">0.99</span><span class="p">,</span><span class="w"> </span><span class="n">ps</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="o">=</span><span class="n">ns</span><span class="p">,</span><span class="w"> </span><span class="n">latency</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="n">ns</span><span class="w"> </span><span class="o">./</span><span class="w"> </span><span class="n">exec_cost</span><span class="p">(</span><span class="mf">0.99</span><span class="p">,</span><span class="w"> </span><span class="n">ps</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="o">=</span><span class="n">ns</span><span class="p">,</span><span class="w"> </span><span class="n">latency</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="n">label</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">xscale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">:log10</span><span class="p">,</span><span class="w"> </span><span class="n">ylims</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">])</span>
<span class="k">end</span>
<span class="n">xlabel!</span><span class="p">(</span><span class="s">&quot;time&quot;</span><span class="p">)</span>
<span class="n">ylabel!</span><span class="p">(</span><span class="s">&quot;efficiency&quot;</span><span class="p">)</span>
<span class="n">title!</span><span class="p">(</span><span class="s">&quot;Weak scaling&quot;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">pl</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="recommended-readings">
<h3>Recommended Readings:<a class="headerlink" href="#recommended-readings" title="Link to this heading">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://blogs.fau.de/hager/archives/5260">Fooling the masses with performance results on parallel computers</a>: learn by counter-examples.</p></li>
<li><p><a class="reference external" href="https://htor.inf.ethz.ch/publications/index.php?pub=222">Scientific Benchmarking of Parallel Computing Systems</a>: Recommended best practices, especially for dealing with performance variability.</p></li>
</ul>
</div></blockquote>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "sdsu-comp605/spring25",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "julia-1.10"
        },
        kernelOptions: {
            name: "julia-1.10",
            path: "./lectures"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'julia-1.10'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="module2-5_intro_multithreading.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">10) Introduction to Multithreading</p>
      </div>
    </a>
    <a class="right-next"
       href="module3-2_intro_to_openmp.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">12) Introduction to OpenMP</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#programs-with-more-than-one-part">1. Programs with more than one part</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scalability">2. Scalability</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scalability-metrics">2.1 Scalability metrics</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scalability-laws">2.1 Scalability laws</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#strong-scaling">3. Strong scaling</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fixed-total-problem-size">Fixed total problem size.</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#strong-scaling-cost-vs-p">3.1 Strong scaling: Cost Vs p</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#efficiency">3.2 Efficiency</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#parallel-efficiency">Parallel efficiency</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#strong-scaling-efficiency-vs-p">3.3 Strong scaling: Efficiency Vs p</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#strong-scaling-speedup-vs-p">3.4 Strong scaling: Speedup Vs p</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#observations">Observations:</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#efficiency-time-spectrum">Efficiency-Time spectrum</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#weak-scaling">4. Weak Scaling</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#recommended-readings">Recommended Readings:</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Valeria Barra
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>